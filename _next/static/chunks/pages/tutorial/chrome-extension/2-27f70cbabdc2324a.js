(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3227],{8905:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorial/chrome-extension/2",function(){return n(2380)}])},2380:function(e,s,n){"use strict";n.r(s);var l=n(1527),r=n(6828),o=n(4579);function i(e){let s=Object.assign({h1:"h1",ul:"ul",li:"li",code:"code",p:"p",pre:"pre",span:"span",a:"a"},(0,o.ah)(),e.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.h1,{children:"Storage"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["local：本地存储，限制为 5 MB，但可以通过添加 ",(0,l.jsx)(s.code,{children:"unlimitedStorage"})," 权限取消大小限制"]}),"\n",(0,l.jsx)(s.li,{children:"sync：同步存储，总大小 100KB，单个 item 大小 8KB。 The quota limitation is 100 KB approx, 8 KB per item."}),"\n",(0,l.jsx)(s.li,{children:"session：in-memory，不保存在硬盘中"}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"Storage 只能通过键值对存取，没有检索功能："}),"\n",(0,l.jsx)(s.pre,{"data-language":"json","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"json","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"chrome.storage.local.set({ key"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" value }).then(() => {"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  console.log("}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"Value is set to "'}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" + value);"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"chrome.storage.local.get(["}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"key"'}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"]).then((result) => {"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  console.log("}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"Value currently is "'}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" + result.key);"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"chrome.storage.sync.set({ key"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" value }).then(() => {"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  console.log("}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"Value is set to "'}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" + value);"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"});"})}),"\n",(0,l.jsx)(s.span,{className:"line",children:" "}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"chrome.storage.session.set({ key"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" value }).then(() => {"})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  console.log("}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:'"Value is set to "'}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" + value);"})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"});"})})]})}),"\n",(0,l.jsx)(s.p,{children:"但是有回调函数，可以在值更改时接到通知："}),"\n",(0,l.jsx)(s.pre,{"data-language":"js","data-theme":"default",children:(0,l.jsxs)(s.code,{"data-language":"js","data-theme":"default",children:[(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"chrome"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"storage"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"."}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"onChanged"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:".addListener"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"("})]}),"\n",(0,l.jsxs)(s.span,{className:"line",children:[(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  callback: "}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"function"}),(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:","})]}),"\n",(0,l.jsx)(s.span,{className:"line",children:(0,l.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:")"})})]})}),"\n",(0,l.jsx)(s.h1,{children:"Reference"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:(0,l.jsx)(s.a,{href:"https://developer.chrome.com/docs/extensions/reference/storage/#event-onChanged",children:"https://developer.chrome.com/docs/extensions/reference/storage/#event-onChanged"})}),"\n"]})]})}n(3366),s.default=(0,r.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,o.ah)(),e.components);return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(i,{...e})}):i(e)},pageOpts:{filePath:"pages/tutorial/chrome-extension/2.md",route:"/tutorial/chrome-extension/2",frontMatter:{authors:"sailist",date:"2023-04-10",description:"",draft:!1,title:"storage"},headings:[{depth:1,value:"Storage",id:"storage"},{depth:1,value:"Reference",id:"reference"}],title:"storage"},pageNextRoute:"/tutorial/chrome-extension/2"})}},function(e){e.O(0,[6828,9774,2888,179],function(){return e(e.s=8905)}),_N_E=e.O()}]);