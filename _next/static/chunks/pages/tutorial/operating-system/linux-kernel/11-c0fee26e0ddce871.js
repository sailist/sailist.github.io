(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[688],{2569:function(s,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorial/operating-system/linux-kernel/11",function(){return n(4089)}])},4089:function(s,e,n){"use strict";n.r(e);var t=n(1527),l=n(6828),i=n(4579);function a(s){let e=Object.assign({p:"p",img:"img",ul:"ul",li:"li",blockquote:"blockquote",pre:"pre",code:"code",span:"span",a:"a",input:"input"},(0,i.ah)(),s.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:"Linux 通过 slab 分配器分配 task_struct 结构，用来达到对象复用和缓存着色（cache coloring）的目的。各个进程的 task_struct 存放在内核栈的尾端。"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:"/images2022-11-17-14-53-14.png",alt:""})}),"\n",(0,t.jsx)(e.p,{children:"每个任务的 thread_info 结构在"}),"\n",(0,t.jsx)(e.p,{children:"每个进程都有一个 thread_info 和一个 task_struct，其中 task_struct 是通俗意义上的进程描述符或 PCB（进程控制块），而 thread_info 则"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"内核栈：用户进程执行系统调用时，系统调用函数在内核态运行时需要的栈空间，每个进程分配一个，位于内核空间"}),"\n",(0,t.jsx)(e.li,{children:"用户栈：用户进程执行用户态函数时的栈空间，每个进程分配一个"}),"\n"]}),"\n",(0,t.jsxs)(e.blockquote,{children:["\n",(0,t.jsx)(e.p,{children:"老的 UNIX 和 Linux 是每个 CPU 只有一个内核栈，因此不允许用户态程序抢占正在执行系统调用的另一个用户态程序。现在最新的 Linux 系统是每个进程一个内核栈了，从而允许系统调用的抢占。"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{"data-language":"text","data-theme":"default",children:(0,t.jsxs)(e.code,{"data-language":"text","data-theme":"default",children:[(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"用户内存空间，每个用户进程都有各自独立的内存空间，保持彼此独立透明，互不干扰。"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"内核内存空间，内核线程间无需切换页表，共享内存空间。"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"带 MMU 的CPU处理的数据地址，全都是虚拟地址；经过 MMU 处理后的地址，到达北桥，为PA地址（linux称为PA，或者物理地址，但其实还不是真正的物理地址）；经过北桥，到其他IP核或外设，一般还会做地址映射，这才是真正访问内存硬件或其他外设的地址，称为dma地址（真正的物理地址）；"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"作者：长平"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"链接：https://www.zhihu.com/question/43699081/answer/123960191"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"来源：知乎"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"When changing protection levels from user to kernel mode, the kernel shouldn't use the stack of the user process, because it may not be valid. The user process may be malicious or contain an error that causes the user %esp to contain an address that is not part of the process's user memory."})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"作者：一块五毛二"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"链接：https://www.zhihu.com/question/43699081/answer/1060669706"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"来源：知乎"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"}})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"Linux-PC 可以通过 kdump 建立调试环境"})}),"\n",(0,t.jsx)(e.span,{className:"line",children:(0,t.jsx)(e.span,{style:{color:"var(--shiki-color-text)"},children:"https://www.cnblogs.com/yanghaizhou/p/7704421.html"})})]})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"https://www.zhihu.com/question/57013926",children:"https://www.zhihu.com/question/57013926"})}),"\n",(0,t.jsxs)(e.li,{children:["thread_info","\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(e.a,{href:"https://blog.csdn.net/gatieme/article/details/51577479",children:"https://blog.csdn.net/gatieme/article/details/51577479"})]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(e.a,{href:"https://www.cnblogs.com/yungyu16/p/13023982.html",children:"https://www.cnblogs.com/yungyu16/p/13023982.html"})]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(e.a,{href:"https://www.cnblogs.com/Tattoo-Welkin/p/10335269.html",children:"https://www.cnblogs.com/Tattoo-Welkin/p/10335269.html"})]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(e.a,{href:"https://www.cnblogs.com/sky-heaven/p/15991962.html",children:"https://www.cnblogs.com/sky-heaven/p/15991962.html"})]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(e.a,{href:"https://blog.csdn.net/u014426028/article/details/108037971",children:"https://blog.csdn.net/u014426028/article/details/108037971"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["task_struct","\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(e.a,{href:"https://blog.csdn.net/gatieme/article/details/51383272#t6",children:"https://blog.csdn.net/gatieme/article/details/51383272#t6"})]}),"\n"]}),"\n"]}),"\n"]})]})}n(3366),e.default=(0,l.j)({MDXContent:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,i.ah)(),s.components);return e?(0,t.jsx)(e,{...s,children:(0,t.jsx)(a,{...s})}):a(s)},pageOpts:{filePath:"pages/tutorial/operating-system/linux-kernel/11.md",route:"/tutorial/operating-system/linux-kernel/11",frontMatter:{authors:"sailist",date:"2022-11-17",description:"",draft:!1,title:"进程管理"},headings:[],title:"进程管理"},pageNextRoute:"/tutorial/operating-system/linux-kernel/11"})}},function(s){s.O(0,[6828,9774,2888,179],function(){return s(s.s=2569)}),_N_E=s.O()}]);