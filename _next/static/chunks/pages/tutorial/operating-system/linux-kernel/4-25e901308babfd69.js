(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1598],{7244:function(s,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorial/operating-system/linux-kernel/4",function(){return e(9439)}])},9439:function(s,n,e){"use strict";e.r(n);var l=e(1527),i=e(6828),t=e(4579);function c(s){let n=Object.assign({h1:"h1",ul:"ul",li:"li",input:"input",h2:"h2",p:"p",strong:"strong",img:"img",code:"code",pre:"pre",span:"span",a:"a"},(0,t.ah)(),s.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{children:"引言"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{children:["软硬件支持","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"UMA/NUMA"}),"\n",(0,l.jsx)(n.li,{children:"CPU 访存"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["寻址","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"页表（单级页表）"}),"\n",(0,l.jsx)(n.li,{children:"进程的内存空间（mm_struct）"}),"\n",(0,l.jsx)(n.li,{children:"缺页中断（按需调页、写时复制）"}),"\n",(0,l.jsx)(n.li,{children:"反向寻址（反向映射）"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["内存模型","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"安全性分析"}),"\n",(0,l.jsx)(n.li,{children:"高端地址"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["性能优化","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"多级页表"}),"\n",(0,l.jsx)(n.li,{children:"缓存（TLB、普通缓存、paging structure caches）"}),"\n",(0,l.jsx)(n.li,{children:"大页（hugepage）"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","内存分配","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","进程内存分配"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","内核内存分配"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","反碎片技术"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","内存回收","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","交换"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["待定","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","内存布局"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","/dev/mem"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","内核对用户数据的处理（copy_from_user）"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","文件缓存（有名映射和匿名映射）"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","缓存"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h1,{children:"内存管理的软硬件支持"}),"\n",(0,l.jsx)(n.h2,{id:"cpu-内存架构",children:"CPU-内存架构"}),"\n",(0,l.jsxs)(n.p,{children:["如果每个处理器核心共享相同的内存地址空间，这样的架构就称为",(0,l.jsx)(n.strong,{children:"UMA(Uniform Memory Access)"}),"。"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"/images2022-11-23-11-20-45.png",alt:""})}),"\n",(0,l.jsxs)(n.p,{children:["对",(0,l.jsxs)(n.strong,{children:["非一致性内存访问（NUMA，Non-Uniform Memory Access）",(0,l.jsx)(n.strong,{children:"不同的内存器件和 CPU 核心从属不同的 Node，每个 Node 都有自己的"}),"集成内存控制器（IMC，Integrated Memory Controller）"]}),"。"]}),"\n",(0,l.jsx)(n.p,{children:"在 NUMA 架构下，CPU 访问不同的物理内存的速度会存在十分明显的差别。这是 Linux 内核内存管理的硬件基础。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"/images2022-11-23-11-20-50.png",alt:""})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"/images2022-11-23-11-18-53.png",alt:""})}),"\n",(0,l.jsx)(n.h2,{id:"mmu",children:"MMU"}),"\n",(0,l.jsx)(n.p,{children:"现代的内存管理方案是硬件和软件（操作系统）共同协同后得到的。在硬件上提供的与内存有关的支持包括三方面："}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"**页表支持：**提供虚拟地址到物理地址转换的硬件支持，包括存储页表基地址的寄存器（如 TTBRx_ELx、CR[0-3] 寄存器）、页表访存单元（table work unit，用于访问在物理内存中的页表的操作）等"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"缓存："})," 在寻址时能够更快的实现虚拟地址到物理地址的转换，这包括 TLB、paging structure caches、高速缓存等"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"缺页中断"}),"：在无法正确将虚拟地址转换为物理地址时，向处理器发出缺页硬件中断"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"这些功能主要是由 MMU 提供的。"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"/images2022-11-23-11-24-45.png",alt:"ARMv7-style Memory Management Unit"})}),"\n",(0,l.jsxs)(n.p,{children:["一些 CPU（如 i386）中还额外提供了",(0,l.jsx)(n.strong,{children:"段式存储管理"}),"，即程序中所使用的地址一律先进行段式映射（段基址:段偏移），再进行页式映射，这一操作在硬件层面上无法绕过，但是 Linux 在软件层面上将全局段描述符表 GDT 中用到的段描述项均设置为基地址为 0 的 4GB 大小的虚拟空间，仅在内核态和用户态标识上存在区分。因此可以理解为 Linux 内核并不是所谓的段页式内存管理，而是在 hack 式的绕过了硬件的段式映射要求后，使用的页式内存管理。"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"/images2022-11-17-21-43-40.png",alt:""})}),"\n",(0,l.jsx)(n.p,{children:"在硬件的约束下，Linux 内核设计了不同的数据结构和接口，这包括："}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["数据结构","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"struct page"}),"：每个 ",(0,l.jsx)(n.code,{children:"page"})," 数据结构代表着一个物理页面，包含全部物理页面的 page 数组由一个全局指针变量 mem_map 定位。"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"struct mm_struct"}),"：内存描述符，每个进程分配一个 mm_struct，此外内核有一个单独设置的 mm_struct。mm_struct 表明了对虚存空间的需求"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"struct vm_area_struct"}),"：每个 vm_area_struct 代表虚拟内存空间中一段连续的、具有相同访问权限的区域，每个进程有多个 vm_area_struct，用链表或平衡树（AVL 树/红黑树）来组织。"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"struct vm_struct"}),"：和 vm_area_struct 类似，不过 vm_area_struct 是给用户进程用的，而 vm_struct 是给内核使用的"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"linux/mmzone.h -> struct zone"}),"：描述物理页面的 ",(0,l.jsx)(n.code,{children:"page"})," 数组被划分为 ZONE_DMA、ZONE_NORMAL、ZONE_HIGHMEM（ZONE_HIGHMEM 为高端内存，可能有）三个管理区，用于不同的内存需求（如 ZONE_DMA 用于专供 DMA 的 IO 操作）。"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"linux/mmzone.h -> struct pglist_data"}),"：即 ",(0,l.jsx)(n.code,{children:"pg_data_t"}),"，每个 ",(0,l.jsx)(n.code,{children:"pg_data_t"})," 管理多个 ",(0,l.jsx)(n.code,{children:"zone"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"struct pglist_data *node_data[MAX_NUMNODES]"}),"：用于 NUMA 结构，每个 CPU node 分配一个 ",(0,l.jsx)(n.code,{children:"pglist_data"}),"。"]}),"\n",(0,l.jsx)(n.li,{children:"..."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["操作模块","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"buddy 分配器：以页为单位分配内存，每个 zone 会分配一个 buddy 内存分配。"}),"\n",(0,l.jsx)(n.li,{children:"slab 分配器（kmalloc、kfree）：用于内核态细粒度空间分配"}),"\n",(0,l.jsx)(n.li,{children:"malloc、free：用于用户态堆内存细粒度分配"}),"\n",(0,l.jsx)(n.li,{children:"brk、sbrk：扩展堆边界【？存疑】"}),"\n",(0,l.jsxs)(n.li,{children:["mmap、munmap：建立虚拟内存和",(0,l.jsx)(n.strong,{children:"文件"}),"之间的映射，这里的文件，可以是硬盘上的具体的某个文件，也可以是物理内存上的一段空间（匿名文件/匿名映射）。vm_area_struct 实际是在 mmap 执行过程中创建的。"]}),"\n",(0,l.jsxs)(n.li,{children:["缺页中断服务程序 ",(0,l.jsx)(n.code,{children:"do_page_fault"}),"：页错误处理，会根据不同的缺页类型调用不同的缺页函数，包括抛出异常、分配物理页面、将硬盘换入物理内存（",(0,l.jsx)(n.code,{children:"ext2_readpage()"}),"）等"]}),"\n",(0,l.jsx)(n.li,{children:"对内存回收的相关接口"}),"\n",(0,l.jsx)(n.li,{children:"..."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"/images2022-11-23-11-38-10.png",alt:""})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"/images2022-11-17-22-13-25.png",alt:""})}),"\n",(0,l.jsx)(n.h1,{children:"内存管理大图"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.img,{src:"/images2022-11-17-22-28-41.png",alt:""})}),"\n",(0,l.jsx)(n.h1,{children:"Linux 实操"}),"\n",(0,l.jsxs)(n.p,{children:["Linux 系统下查看内存管理区可以通过 ",(0,l.jsx)(n.code,{children:"cat /proc/buddyinfo"})," 来完成："]}),"\n",(0,l.jsx)(n.pre,{"data-language":"shell","data-theme":"default",children:(0,l.jsxs)(n.code,{"data-language":"shell","data-theme":"default",children:[(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"cat "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"/proc/buddyinfo"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Node "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:", zone      DMA      "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"1"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ..."})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Node "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:", zone    DMA32    "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"975"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ..."})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:">"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" Node "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"0"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:", zone   Normal     "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"71"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" ..."})]})]})}),"\n",(0,l.jsxs)(n.p,{children:["寻址长度可以在 ",(0,l.jsx)(n.code,{children:"cat /proc/cpuinfo"})," 中找到"]}),"\n",(0,l.jsx)(n.pre,{"data-language":"shell","data-theme":"default",children:(0,l.jsxs)(n.code,{"data-language":"shell","data-theme":"default",children:[(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"cat "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"/proc/cpuinfo"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-keyword)"},children:"|"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" grep "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"address"})]}),"\n",(0,l.jsxs)(n.span,{className:"line",children:[(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:"address "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"sizes	:"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"48"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"bits"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"physical,"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-constant)"},children:"48"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"bits"}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,l.jsx)(n.span,{style:{color:"var(--shiki-token-string)"},children:"virtual"})]})]})}),"\n",(0,l.jsx)(n.h1,{children:"课后题"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"页表有几个？由谁持有？"}),"\n",(0,l.jsx)(n.li,{children:"页表存在哪？"}),"\n",(0,l.jsx)(n.li,{children:"为什么需要高端内存？"}),"\n"]}),"\n",(0,l.jsx)(n.h1,{children:"前置概念"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"中断服务程序"}),"\n",(0,l.jsx)(n.li,{children:"进程上下文切换"}),"\n"]}),"\n",(0,l.jsx)(n.h1,{children:"Reference"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://cloud.tencent.com/developer/article/1950803",children:"https://cloud.tencent.com/developer/article/1950803"})}),"\n",(0,l.jsx)(n.li,{children:"《Linux 内核源代码情景分析》"}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/LoyenWang/p/11406693.html",children:"https://www.cnblogs.com/LoyenWang/p/11406693.html"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://juejin.cn/post/7088209331035848711",children:"https://juejin.cn/post/7088209331035848711"})," 一些图画的很好"]}),"\n",(0,l.jsxs)(n.li,{children:["slab","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/358891862",children:"https://zhuanlan.zhihu.com/p/358891862"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://www.dingmos.com/index.php/archives/23/#cl-9",children:"https://www.dingmos.com/index.php/archives/23/#cl-9"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://blog.csdn.net/hzj_001/article/details/99705452",children:"https://blog.csdn.net/hzj_001/article/details/99705452"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ","kmem_cache","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://blog.csdn.net/a7980718/article/details/77739573",children:"https://blog.csdn.net/a7980718/article/details/77739573"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://blog.csdn.net/YuZhiHui_No1/article/details/47305361",children:"https://blog.csdn.net/YuZhiHui_No1/article/details/47305361"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/LoyenWang/p/11922887.html",children:"https://www.cnblogs.com/LoyenWang/p/11922887.html"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://blog.51cto.com/leejia/1431756",children:"https://blog.51cto.com/leejia/1431756"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://blog.csdn.net/zhoutaopower/article/details/89389254",children:"https://blog.csdn.net/zhoutaopower/article/details/89389254"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/491500340",children:"https://zhuanlan.zhihu.com/p/491500340"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["段描述符","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://blog.51cto.com/u_14207158/2575739",children:"https://blog.51cto.com/u_14207158/2575739"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/zpchcbd/p/15862009.html",children:"https://www.cnblogs.com/zpchcbd/p/15862009.html"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/wingsummer/p/15312627.html",children:"https://www.cnblogs.com/wingsummer/p/15312627.html"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["malloc","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/luoleqi/p/12731875.html",children:"https://www.cnblogs.com/luoleqi/p/12731875.html"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://blog.csdn.net/Apollon_krj/article/details/54565768",children:"https://blog.csdn.net/Apollon_krj/article/details/54565768"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["高端内存","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.zhihu.com/question/280526042",children:"https://www.zhihu.com/question/280526042"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://cloud.tencent.com/developer/article/1374639",children:"https://cloud.tencent.com/developer/article/1374639"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/xingmuxin/p/10967716.html",children:"https://www.cnblogs.com/xingmuxin/p/10967716.html"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://unix.stackexchange.com/questions/4929/what-are-high-memory-and-low-memory-on-linux",children:"https://unix.stackexchange.com/questions/4929/what-are-high-memory-and-low-memory-on-linux"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://stackoverflow.com/questions/68091247/confusion-about-different-meanings-of-highmem-in-linux-kernel",children:"https://stackoverflow.com/questions/68091247/confusion-about-different-meanings-of-highmem-in-linux-kernel"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://biscuitos.github.io/blog/MMU-Linux4x-FIXUP/",children:"https://biscuitos.github.io/blog/MMU-Linux4x-FIXUP/"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["MMU","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/402806252",children:"https://zhuanlan.zhihu.com/p/402806252"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/399726541",children:"https://zhuanlan.zhihu.com/p/399726541"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["CR3","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://blog.csdn.net/SweeNeil/article/details/106171361",children:"https://blog.csdn.net/SweeNeil/article/details/106171361"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["vm_area_struct","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/431713219",children:"https://zhuanlan.zhihu.com/p/431713219"})]}),"\n",(0,l.jsx)(n.li,{children:"[ ]"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["地址总线、数据总线","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://blog.51cto.com/u_13800449/3067938",children:"https://blog.51cto.com/u_13800449/3067938"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["分页大小 Linux 内核","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/458935522",children:"https://zhuanlan.zhihu.com/p/458935522"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["多级页表","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.zhihu.com/question/63375062/answer/1403291487",children:"https://www.zhihu.com/question/63375062/answer/1403291487"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["mm_struct","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://blog.csdn.net/LF_2016/article/details/54346121",children:"https://blog.csdn.net/LF_2016/article/details/54346121"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["内存回收","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://blog.csdn.net/u012489236/article/details/120587124",children:"https://blog.csdn.net/u012489236/article/details/120587124"})}),"\n",(0,l.jsxs)(n.li,{children:["交换","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://zorrozou.github.io/docs/books/linuxde_nei_cun_hui_shou_he_jiao_huan.html",children:"https://zorrozou.github.io/docs/books/linuxde_nei_cun_hui_shou_he_jiao_huan.html"})]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://segmentfault.com/a/1190000008125116",children:"https://segmentfault.com/a/1190000008125116"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["struct page","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/emperor_zark/archive/2013/03/15/linux_page_1.html",children:"https://www.cnblogs.com/emperor_zark/archive/2013/03/15/linux_page_1.html"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["反碎片技术","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://blog.csdn.net/WANGYONGZIXUE/article/details/126005158",children:"https://blog.csdn.net/WANGYONGZIXUE/article/details/126005158"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/565464633",children:"https://zhuanlan.zhihu.com/p/565464633"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://cn.pingcap.com/blog/linux-kernel-vs-memory-fragmentation-1",children:"https://cn.pingcap.com/blog/linux-kernel-vs-memory-fragmentation-1"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://article.itxueyuan.com/WPG1m",children:"https://article.itxueyuan.com/WPG1m"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["文件缓存","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/luozhiyun/p/13061199.html",children:"https://www.cnblogs.com/luozhiyun/p/13061199.html"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["虚拟内存模型","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://stackoverflow.com/questions/50655241/virtual-memory-usage",children:"https://stackoverflow.com/questions/50655241/virtual-memory-usage"})}),"\n",(0,l.jsxs)(n.li,{children:["高端内存","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://blog.csdn.net/liuzheng1/article/details/78282760",children:"https://blog.csdn.net/liuzheng1/article/details/78282760"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["永久映射、临时映射","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://blog.csdn.net/faxiang1230/article/details/105995416",children:"https://blog.csdn.net/faxiang1230/article/details/105995416"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["fixmap addr","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"http://www.wowotech.net/memory_management/440.html",children:"http://www.wowotech.net/memory_management/440.html"})]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://biscuitos.github.io/blog/MMU-Linux4x-FIXUP/",children:"https://biscuitos.github.io/blog/MMU-Linux4x-FIXUP/"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["copy_from_user","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://blog.51cto.com/xiaojielinux/1874080",children:"https://blog.51cto.com/xiaojielinux/1874080"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["NUMA","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://qumulo.com/blog/non-uniform-memory-access-numa/",children:"https://qumulo.com/blog/non-uniform-memory-access-numa/"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/67558970",children:"https://zhuanlan.zhihu.com/p/67558970"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/527516996",children:"https://zhuanlan.zhihu.com/p/527516996"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["内存分配","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://blog.csdn.net/longwang155069/article/details/105529591",children:"https://blog.csdn.net/longwang155069/article/details/105529591"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/363923438",children:"https://zhuanlan.zhihu.com/p/363923438"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"http://books.gigatux.nl/mirror/kerneldevelopment/0672327201/ch11lev1sec5.html#:~:text=The%20vmalloc()%20function%20only,of%20the%20logical%20address%20space",children:"http://books.gigatux.nl/mirror/kerneldevelopment/0672327201/ch11lev1sec5.html#:~:text=The%20vmalloc()%20function%20only,of%20the%20logical%20address%20space"}),"."]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://jishuin.proginn.com/p/763bfbd5733b",children:"https://jishuin.proginn.com/p/763bfbd5733b"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["可执行文件的内存布局","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://gist.github.com/CMCDragonkai/10ab53654b2aa6ce55c11cfc5b2432a4",children:"https://gist.github.com/CMCDragonkai/10ab53654b2aa6ce55c11cfc5b2432a4"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["各种物理数据结构的转换和索引（",(0,l.jsx)(n.code,{children:"PA<->VA, page<->zone"}),"。。。）","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/arnoldlu/p/8335568.html",children:"https://www.cnblogs.com/arnoldlu/p/8335568.html"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["mmap 系统调用","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/527532465",children:"https://zhuanlan.zhihu.com/p/527532465"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["vm_area_struct","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["优先树 ",(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/539591726",children:"https://zhuanlan.zhihu.com/p/539591726"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["微架构","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["玄铁C910 ",(0,l.jsx)(n.a,{href:"https://zhuanlan.zhihu.com/p/512960206",children:"https://zhuanlan.zhihu.com/p/512960206"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["页面回收","\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,l.jsx)(n.a,{href:"https://www.cnblogs.com/sky-heaven/p/5657824.html",children:"https://www.cnblogs.com/sky-heaven/p/5657824.html"})]}),"\n"]}),"\n"]}),"\n"]})]})}e(3366),n.default=(0,i.j)({MDXContent:function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),s.components);return n?(0,l.jsx)(n,{...s,children:(0,l.jsx)(c,{...s})}):c(s)},pageOpts:{filePath:"pages/tutorial/operating-system/linux-kernel/4.md",route:"/tutorial/operating-system/linux-kernel/4",frontMatter:{authors:"sailist",date:"2022-11-24",description:"",draft:!1,title:"1.内存管理"},headings:[{depth:1,value:"引言",id:"引言"},{depth:1,value:"内存管理的软硬件支持",id:"内存管理的软硬件支持"},{depth:2,value:"CPU-内存架构",id:"cpu-内存架构"},{depth:2,value:"MMU",id:"mmu"},{depth:1,value:"内存管理大图",id:"内存管理大图"},{depth:1,value:"Linux 实操",id:"linux-实操"},{depth:1,value:"课后题",id:"课后题"},{depth:1,value:"前置概念",id:"前置概念"},{depth:1,value:"Reference",id:"reference"}],title:"1.内存管理"},pageNextRoute:"/tutorial/operating-system/linux-kernel/4"})}},function(s){s.O(0,[6828,9774,2888,179],function(){return s(s.s=7244)}),_N_E=s.O()}]);